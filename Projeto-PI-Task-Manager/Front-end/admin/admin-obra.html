<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Detalhes da Obra ‚Äì Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/styles.css">
  
</head>
<body>
  <header class="logo-Centro">
    <h1><i class="fas fa-home"></i> <span style="color: #ff7a00;">BR</span>Construtora</h1>
    <div class="top-buttons">
      <button onclick="history.back()">üîô Voltar</button>
      <a href="../homepage.html"><button>‚õî Sair</button></a>
    </div>
  </header>

  <div class="detalhes-obra-admin">
    <h2>Detalhes da Obra ‚Äì Admin</h2>
    <p><strong>ID:</strong> <span id="id_obra"></span></p>
    <p><strong>Cliente:</strong> <span id="cliente_nome"></span></p>
    <p><strong>T√≠tulo da Obra:</strong> <span id="titulo"></span></p>
    <p><strong>Status:</strong> <span id="status"></span></p>

    <a id="btnIrCliente" class="btn-ir-cliente">Ir para Painel do Cliente</a>

    <h3>Adicionar Fotos da Obra</h3>
    <div id="galeria"></div>
    <input type="file" id="fotoObra" multiple>
    <button onclick="uploadFotos()">Enviar Fotos</button>
    <p id="msgFoto"></p>

    <h3>Adicionar Material</h3>
    <form id="formMaterial">
      <label for="nome_material">Nome do Material:</label>
      <input type="text" id="nome_material" required>

      <label for="quantidade">Quantidade:</label>
      <input type="number" id="quantidade" required>

      <label for="custo">Custo unit√°rio (R$):</label>
      <input type="number" id="custo" step="0.01" required>

      <button type="submit">Adicionar Material</button>
    </form>

    <h3>Atualizar Status da Obra</h3>
    <form id="formStatus">
      <label for="novo_status">Novo Status:</label>
      <select id="novo_status" required>
        <option value="" disabled selected>Selecione o novo status</option>
        <option value="Planejada">Planejada</option>
        <option value="Em andamento">Em andamento</option>
        <option value="Conclu√≠da">Conclu√≠da</option>
        <option value="Pausada">Pausada</option>
      </select>
      <button type="submit">Atualizar Status</button>
      <p id="msgStatus"></p>
    </form>

    <h3>Or√ßamento da Obra</h3>
    <p>Or√ßamento Atual: R$ <span id="orcamentoExibido">0,00</span>
      <button class="btn-editar" onclick="mostrarFormularioOrcamento()">Editar Or√ßamento</button>
    </p>

    <form id="formOrcamento" style="display:none">
      <label for="novo_orcamento">Novo Or√ßamento (R$):</label>
      <input type="number" id="novo_orcamento" step="0.01" required>
      <button type="submit">Salvar</button>
      <p id="msgOrcamento"></p>
    </form>
  </div>

  <script src="../js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const params = new URLSearchParams(window.location.search);
      const idObra = params.get('id');

      if (idObra) {
        const btn = document.getElementById('btnIrCliente');
        if (btn) {
          btn.href = '../cliente/painel-cliente.html?id=' + idObra;
        }
      } else {
        console.warn('ID da obra n√£o encontrado na URL.');
      }
    });

    function mostrarFormularioOrcamento() {
      document.getElementById('formOrcamento').style.display = 'block';
    }
  </script>
</body>
</html>
